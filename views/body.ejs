<h2>Players</h2>
<table>
  <thead>
    <tr>
      <th>Player</th>
      <th>Money</th>
      <% for (const company in gameState.companies) { %>
        <th>
          <%= company %><br>
          Money: $<%= gameState.companies[company].money %>
        </th>
      <% } %>
      <th>Update</th>
    </tr>
  </thead>
  <tbody>
    <% for (const player in gameState.players) { %>
      <tr>
        <td><%= player %></td>
        <td>$<%= gameState.players[player].money %></td>
        <% for (const company in gameState.companies) { %>
          <td>
            <%= gameState.players[player].shares[company] || 0 %>
            <form action="/buy-share" method="POST" style="display:inline;">
              <input type="hidden" name="player" value="<%= player %>">
              <input type="hidden" name="company" value="<%= company %>">
              <button type="submit">+</button>
            </form>
            <form action="/sell-share" method="POST" style="display:inline;">
              <input type="hidden" name="player" value="<%= player %>">
              <input type="hidden" name="company" value="<%= company %>">
              <button type="submit">-</button>
            </form>
          </td>
        <% } %>
        <td>
          <form action="/update-player-money" method="POST">
            <input type="hidden" name="player" value="<%= player %>">
            <label>Amount: <input type="number" name="amount"></label>
            <button type="submit">Update</button>
          </form>
        </td>
      </tr>
    <% } %>
    <!-- Form to pay to each shareholder -->
    <tr>
      <td>Pay per Share</td>
      <td></td>
      <% for (const company in gameState.companies) { %>
        <td>
          <form action="/pay-per-share" method="POST" style="display:inline;">
            <input type="hidden" name="company" value="<%= company %>">
            <input type="hidden" name="retains" value="false">
            <label>Amount: <input type="number" name="amount" value="<%= gameState.companies[company].lastPayPerShare %>"></label>
            <button type="submit">Pay</button>
          </form>
          <form action="/pay-per-share" method="POST" style="display:inline;">
            <input type="hidden" name="company" value="<%= company %>">
            <input type="hidden" name="retains" value="true">
            <input type="hidden" name="amount" value="<%= gameState.companies[company].lastPayPerShare %>">
            <button type="submit">Retain</button>
          </form>
        </td>
      <% } %>
      <td></td>
    </tr>
    <!-- Form to update company money -->
    <tr>
      <td>Update Money</td>
      <td></td>
      <% for (const company in gameState.companies) { %>
        <td>
          <form action="/update-company-money" method="POST">
            <input type="hidden" name="company" value="<%= company %>">
            <label>Amount: <input type="number" name="amount"></label>
            <button type="submit">Update</button>
          </form>
        </td>
      <% } %>
      <td></td>
    </tr>
    <!-- Form to update company price -->
    <tr>
      <td>Update Price</td>
      <td></td>
      <% for (const company in gameState.companies) { %>
        <td>
          <form action="/update-company-price" method="POST">
            <input type="hidden" name="company" value="<%= company %>">
            <label>Price: <input type="number" name="price" value="<%= gameState.companies[company].price %>"></label>
            <button type="submit">Update</button>
          </form>
        </td>
      <% } %>
      <td></td>
    </tr>
  </tbody>
</table>

<h2>Recent Moves</h2>
<ul>
  <% gameState.log.slice(-10).reverse().forEach(move => { %>
    <li><%= move %></li>
  <% }) %>
</ul>
